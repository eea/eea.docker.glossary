apache:
  restart: always
  image: eeacms/glossary-apache
  links:
  - varnish
  ports:
  - "2222:80"
  volumes:
  - /etc/localtime:/etc/localtime:ro

varnish:
  restart: always
  image: eeacms/glossary-varnish
  links:
  - zclient1
  - zclient2
  - zclient3
  environment:
  - CACHE_SIZE=200M
  - PARAM_VALUE=-p default_ttl=3600 -p default_grace=3600
  volumes:
  - /etc/localtime:/etc/localtime:ro

zeo:
  restart: always
  image: eeacms/glossary-zeoserver
  user: "1000"
  volumes_from:
  - data
  volumes:
  - /etc/localtime:/etc/localtime:ro

zclient1:
  restart: always
  image: eeacms/glossary-zclient
  user: "1000"
  links:
  - zeo
  volumes:
  - /etc/localtime:/etc/localtime:ro

zclient2:
  restart: always
  image: eeacms/glossary-zclient
  user: "1000"
  links:
  - zeo
  volumes:
  - /etc/localtime:/etc/localtime:ro

zclient3:
  restart: always
  image: eeacms/glossary-zclient
  user: "1000"
  links:
  - zeo
  volumes:
  - /etc/localtime:/etc/localtime:ro

data:
  image: busybox
  volumes:
  - /var/local/zeostorage/var
  command: sh -c "chown -R 1000:1000 /var/local/zeostorage/var/ >> /var/local/zeostorage/var/chown.log && exec tail -f /var/local/zeostorage/var/chown.log"
  tty: true
  stdin_open: true
